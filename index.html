<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navid's Knowledge Graph</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Arial', sans-serif;
            min-height: 100vh;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2em;
            margin: 10px 0 0 0;
            opacity: 0.9;
        }
        
        .knowledge-graph {
            width: 100%;
            max-width: 1200px;
            height: 700px;
            margin: 0 auto;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 15px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .node-core { 
            fill: #ff6b6b; 
            stroke: #fff; 
            stroke-width: 4px;
            filter: drop-shadow(3px 3px 6px rgba(0,0,0,0.3));
        }
        .node-domain { 
            fill: #4ecdc4; 
            stroke: #fff; 
            stroke-width: 3px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.2));
        }
        .node-tech { 
            fill: #45b7d1; 
            stroke: #fff; 
            stroke-width: 2px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.2));
        }
        .node-project { 
            fill: #96ceb4; 
            stroke: #fff; 
            stroke-width: 2px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.2));
        }
        .node-skill { 
            fill: #feca57; 
            stroke: #fff; 
            stroke-width: 2px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.2));
        }
        
        .link { 
            stroke: rgba(255,255,255,0.6); 
            stroke-width: 2px;
        }
        .link-strong { 
            stroke-width: 4px; 
            stroke: #ff6b6b;
            stroke-opacity: 0.8;
        }
        
        .node-text { 
            font-family: 'Arial', sans-serif; 
            font-weight: bold;
            fill: #2c3e50;
            text-anchor: middle;
            pointer-events: none;
            text-shadow: 1px 1px 2px rgba(255,255,255,0.8);
        }
        
        .legend {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.95);
            padding: 20px;
            border-radius: 12px;
            font-size: 14px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            backdrop-filter: blur(10px);
        }
        
        .legend h3 {
            margin: 0 0 15px 0;
            color: #2c3e50;
            font-size: 16px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
        }
        
        .legend-color {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 10px;
            border: 2px solid #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .instructions {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(255,255,255,0.95);
            padding: 15px;
            border-radius: 10px;
            font-size: 13px;
            color: #2c3e50;
            max-width: 300px;
            backdrop-filter: blur(10px);
        }
        
        .instructions h4 {
            margin: 0 0 10px 0;
            color: #2c3e50;
        }
        
        .back-link {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .back-link:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        
        @media (max-width: 768px) {
            .knowledge-graph {
                height: 500px;
            }
            .legend, .instructions {
                position: relative;
                margin: 20px auto;
                max-width: 90%;
            }
        }
    </style>
</head>
<body>
    <a href="https://github.com/navid72m" class="back-link">‚Üê Back to GitHub</a>
    
    <div class="header">
        <h1>üß† Navid's Knowledge Universe</h1>
        <p>Interactive visualization of expertise, projects & research connections</p>
    </div>
    
    <div class="knowledge-graph" id="knowledge-graph">
        <div class="legend">
            <h3>Knowledge Types</h3>
            <div class="legend-item">
                <div class="legend-color" style="background: #ff6b6b;"></div>
                <span><strong>Core Identity</strong></span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #4ecdc4;"></div>
                <span><strong>Domain Expertise</strong></span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #45b7d1;"></div>
                <span><strong>Technologies</strong></span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #96ceb4;"></div>
                <span><strong>Active Projects</strong></span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #feca57;"></div>
                <span><strong>Key Skills</strong></span>
            </div>
        </div>
        
        <div class="instructions">
            <h4>üéÆ How to Explore:</h4>
            <ul style="margin: 0; padding-left: 20px;">
                <li><strong>Drag</strong> nodes to reorganize</li>
                <li><strong>Hover</strong> for zoom effects</li>
                <li><strong>Thick lines</strong> = strong connections</li>
                <li><strong>Node size</strong> = importance level</li>
            </ul>
        </div>
    </div>

    <script>
        // Knowledge Graph Data
        const nodes = [
            // Core Identity
            { id: "navid", name: "Navid\nMirnouri", type: "core", size: 30 },
            
            // Domain Expertise
            { id: "healthcare", name: "Healthcare\nAI", type: "domain", size: 22 },
            { id: "nlp", name: "Natural Language\nProcessing", type: "domain", size: 20 },
            { id: "ethics", name: "AI Ethics &\nAlignment", type: "domain", size: 18 },
            { id: "edge-ai", name: "Edge AI\nDeployment", type: "domain", size: 18 },
            { id: "systems", name: "Systems\nArchitecture", type: "domain", size: 17 },
            
            // Technologies
            { id: "python", name: "Python", type: "tech", size: 20 },
            { id: "pytorch", name: "PyTorch", type: "tech", size: 18 },
            { id: "bert", name: "BERT", type: "tech", size: 16 },
            { id: "gpt", name: "GPT", type: "tech", size: 16 },
            { id: "docker", name: "Docker", type: "tech", size: 15 },
            { id: "typescript", name: "TypeScript", type: "tech", size: 15 },
            { id: "react", name: "React\nNative", type: "tech", size: 14 },
            { id: "golang", name: "Go", type: "tech", size: 14 },
            { id: "c", name: "C", type: "tech", size: 13 },
            { id: "rag", name: "RAG", type: "tech", size: 15 },
            
            // Active Projects
            { id: "society-network", name: "Society as\nNeural Network", type: "project", size: 20 },
            { id: "llm-embedded", name: "LLM on\nEdge Hardware", type: "project", size: 19 },
            { id: "rlhf-lab", name: "RLHF\nLaboratory", type: "project", size: 18 },
            { id: "time-series", name: "Time Series\nAnalysis Lab", type: "project", size: 17 },
            { id: "healthcare-qa", name: "Healthcare\nQA System", type: "project", size: 16 },
            
            // Key Skills
            { id: "research", name: "Research &\nPublication", type: "skill", size: 17 },
            { id: "observability", name: "System\nObservability", type: "skill", size: 15 },
            { id: "multilingual", name: "Trilingual\nCommunication", type: "skill", size: 14 },
            { id: "cross-cultural", name: "Cross-Cultural\nInnovation", type: "skill", size: 14 },
            { id: "mentoring", name: "Technical\nMentoring", type: "skill", size: 13 },
            { id: "compliance", name: "Regulatory\nCompliance", type: "skill", size: 13 }
        ];

        const links = [
            // Core Identity Connections (Strong)
            { source: "navid", target: "healthcare", strength: "strong" },
            { source: "navid", target: "ethics", strength: "strong" },
            { source: "navid", target: "nlp", strength: "strong" },
            { source: "navid", target: "research", strength: "strong" },
            
            // Domain to Technology Connections
            { source: "healthcare", target: "bert", strength: "strong" },
            { source: "healthcare", target: "gpt", strength: "strong" },
            { source: "healthcare", target: "python", strength: "normal" },
            { source: "healthcare", target: "compliance", strength: "strong" },
            
            { source: "nlp", target: "bert", strength: "strong" },
            { source: "nlp", target: "gpt", strength: "strong" },
            { source: "nlp", target: "rag", strength: "strong" },
            { source: "nlp", target: "pytorch", strength: "normal" },
            
            { source: "edge-ai", target: "pytorch", strength: "normal" },
            { source: "edge-ai", target: "c", strength: "normal" },
            { source: "edge-ai", target: "python", strength: "normal" },
            
            { source: "systems", target: "docker", strength: "strong" },
            { source: "systems", target: "observability", strength: "strong" },
            { source: "systems", target: "python", strength: "normal" },
            { source: "systems", target: "golang", strength: "normal" },
            
            // Project Connections
            { source: "society-network", target: "ethics", strength: "strong" },
            { source: "society-network", target: "python", strength: "normal" },
            { source: "society-network", target: "research", strength: "strong" },
            
            { source: "llm-embedded", target: "edge-ai", strength: "strong" },
            { source: "llm-embedded", target: "pytorch", strength: "strong" },
            { source: "llm-embedded", target: "c", strength: "normal" },
            
            { source: "rlhf-lab", target: "ethics", strength: "strong" },
            { source: "rlhf-lab", target: "pytorch", strength: "normal" },
            { source: "rlhf-lab", target: "python", strength: "normal" },
            
            { source: "time-series", target: "python", strength: "strong" },
            { source: "time-series", target: "pytorch", strength: "normal" },
            
            { source: "healthcare-qa", target: "healthcare", strength: "strong" },
            { source: "healthcare-qa", target: "nlp", strength: "strong" },
            { source: "healthcare-qa", target: "rag", strength: "strong" },
            
            // Skill Interconnections
            { source: "research", target: "multilingual", strength: "normal" },
            { source: "observability", target: "systems", strength: "strong" },
            { source: "cross-cultural", target: "multilingual", strength: "strong" },
            { source: "cross-cultural", target: "ethics", strength: "normal" },
            { source: "compliance", target: "healthcare", strength: "strong" },
            
            // Technology Interconnections
            { source: "python", target: "pytorch", strength: "strong" },
            { source: "typescript", target: "react", strength: "strong" },
            { source: "bert", target: "gpt", strength: "normal" },
            { source: "bert", target: "rag", strength: "normal" },
            { source: "gpt", target: "rag", strength: "strong" },
            
            // Cross-domain Connections
            { source: "healthcare", target: "ethics", strength: "strong" },
            { source: "edge-ai", target: "systems", strength: "normal" },
            { source: "nlp", target: "ethics", strength: "normal" }
        ];

        // Set up the visualization
        const container = document.getElementById('knowledge-graph');
        const width = container.clientWidth || 1000;
        const height = container.clientHeight || 600;
        
        const svg = d3.select("#knowledge-graph")
            .append("svg")
            .attr("width", width)
            .attr("height", height);

        // Initialize node positions randomly but within bounds
        nodes.forEach(d => {
            d.x = Math.random() * (width - 200) + 100;
            d.y = Math.random() * (height - 200) + 100;
        });

        // Create simulation with better force balance
        const simulation = d3.forceSimulation(nodes)
            .force("link", d3.forceLink(links).id(d => d.id)
                .distance(100)
                .strength(0.7))
            .force("charge", d3.forceManyBody()
                .strength(-300)
                .distanceMax(200))
            .force("center", d3.forceCenter(width / 2, height / 2)
                .strength(0.05))
            .force("collision", d3.forceCollide()
                .radius(d => d.size + 15)
                .strength(0.8))
            .force("bounds", () => {
                nodes.forEach(d => {
                    d.x = Math.max(d.size + 10, Math.min(width - d.size - 10, d.x));
                    d.y = Math.max(d.size + 10, Math.min(height - d.size - 10, d.y));
                });
            });

        // Create links
        const link = svg.append("g")
            .selectAll("line")
            .data(links)
            .enter().append("line")
            .attr("class", d => d.strength === "strong" ? "link link-strong" : "link");

        // Create nodes
        const node = svg.append("g")
            .selectAll("circle")
            .data(nodes)
            .enter().append("circle")
            .attr("r", d => d.size)
            .attr("class", d => `node-${d.type}`)
            .style("cursor", "grab")
            .call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));

        // Add labels
        const labels = svg.append("g")
            .selectAll("text")
            .data(nodes)
            .enter().append("text")
            .attr("class", "node-text")
            .style("font-size", d => `${Math.max(10, d.size/2.5)}px`)
            .selectAll("tspan")
            .data(d => d.name.split('\n'))
            .enter().append("tspan")
            .attr("x", 0)
            .attr("dy", (d, i) => i === 0 ? "0.35em" : "1.2em")
            .text(d => d);

        // Add enhanced hover effects
        node.on("mouseover", function(event, d) {
            d3.select(this)
                .transition()
                .duration(200)
                .attr("r", d.size * 1.4)
                .style("filter", "drop-shadow(5px 5px 10px rgba(0,0,0,0.4))");
                
            // Highlight connected nodes
            const connectedNodes = new Set();
            links.forEach(link => {
                if (link.source.id === d.id) connectedNodes.add(link.target.id);
                if (link.target.id === d.id) connectedNodes.add(link.source.id);
            });
            
            node.style("opacity", n => connectedNodes.has(n.id) || n.id === d.id ? 1 : 0.3);
            link.style("opacity", l => l.source.id === d.id || l.target.id === d.id ? 1 : 0.1);
            
        }).on("mouseout", function(event, d) {
            d3.select(this)
                .transition()
                .duration(200)
                .attr("r", d.size)
                .style("filter", d => `drop-shadow(${d.type === 'core' ? '3px 3px 6px' : '2px 2px 4px'} rgba(0,0,0,0.3))`);
                
            // Reset opacity
            node.style("opacity", 1);
            link.style("opacity", l => l.strength === "strong" ? 0.8 : 0.6);
        });

        // Update positions on simulation tick with proper bounds checking
        simulation.on("tick", () => {
            // Constrain nodes to stay within bounds
            nodes.forEach(d => {
                d.x = Math.max(d.size + 20, Math.min(width - d.size - 20, d.x));
                d.y = Math.max(d.size + 20, Math.min(height - d.size - 20, d.y));
            });

            link
                .attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);

            node
                .attr("cx", d => d.x)
                .attr("cy", d => d.y);
                
            labels
                .attr("transform", d => `translate(${d.x}, ${d.y})`);
        });

        // Restart simulation with alpha decay
        simulation.alpha(1).alphaDecay(0.02).restart();

        // Add a warm-up period for better initial positioning
        setTimeout(() => {
            simulation.alpha(0.3).restart();
        }, 1000);

        // Drag functions
        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
            d3.select(this).style("cursor", "grabbing");
        }

        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }

        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
            d3.select(this).style("cursor", "grab");
        }

        // Responsive resize with proper repositioning
        window.addEventListener('resize', () => {
            const newWidth = container.clientWidth || 1000;
            const newHeight = container.clientHeight || 600;
            
            svg.attr("width", newWidth).attr("height", newHeight);
            
            // Update simulation forces
            simulation
                .force("center", d3.forceCenter(newWidth / 2, newHeight / 2))
                .force("bounds", () => {
                    nodes.forEach(d => {
                        d.x = Math.max(d.size + 10, Math.min(newWidth - d.size - 10, d.x));
                        d.y = Math.max(d.size + 10, Math.min(newHeight - d.size - 10, d.y));
                    });
                });
            
            simulation.alpha(0.3).restart();
        });

        // Add a reset button for debugging
        const resetButton = d3.select("#knowledge-graph")
            .append("button")
            .style("position", "absolute")
            .style("bottom", "150px")
            .style("left", "20px")
            .style("padding", "10px 15px")
            .style("background", "rgba(255,255,255,0.9)")
            .style("border", "none")
            .style("border-radius", "5px")
            .style("cursor", "pointer")
            .text("üîÑ Reset Layout")
            .on("click", () => {
                // Randomize positions and restart
                nodes.forEach(d => {
                    d.x = Math.random() * (width - 200) + 100;
                    d.y = Math.random() * (height - 200) + 100;
                    d.fx = null;
                    d.fy = null;
                });
                simulation.alpha(1).restart();
            });

        // Add pulsing animation for core node
        function pulse() {
            node.filter(d => d.type === "core")
                .transition()
                .duration(2000)
                .attr("r", d => d.size * 1.1)
                .transition()
                .duration(2000)
                .attr("r", d => d.size)
                .on("end", pulse);
        }
        
        // Start pulsing after initial layout
        setTimeout(pulse, 3000);
        
    </script>
</body>
</html>
